<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CS Results</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
</head>
<body>
  <div class="flex flex-wrap justify-center">
    <!-- Fetch API data using JavaScript -->
    <script>
      fetch("http://localhost:3000/cs")
        .then(response => response.json())
        .then(data => {
          // Iterate through the data and create a card for each item
          data.forEach(item => {
            // Calculate the total marks and percentage
            let totalMarks = 0;
            let marksObtained = 0;
            Object.keys(item.marks).forEach(key => {
              totalMarks += 50; // Assuming each subject has a maximum of 50 marks
              marksObtained += parseInt(item.marks[key]);
            });
            let percentage = ((marksObtained / totalMarks) * 100).toFixed(2);

            // Create a card div with Tailwind CSS classes
            const card = document.createElement('div');
            card.classList.add('max-w-md', 'bg-white', 'shadow-md', 'rounded-md', 'overflow-hidden', 'm-4');

            // Create a card header
            const cardHeader = document.createElement('div');
            cardHeader.classList.add('bg-gray-100', 'py-2', 'px-4');
            const cardTitle = document.createElement('h2');
            cardTitle.classList.add('text-xl', 'font-semibold', 'text-gray-700');
            cardTitle.textContent = item.name;
            cardHeader.appendChild(cardTitle);
            const cardSubTitle = document.createElement('p');
            cardSubTitle.classList.add('text-gray-500', 'text-sm');
            cardSubTitle.textContent = `Reg. No: ${item.regno} | Percentage: ${percentage}%`;
            cardHeader.appendChild(cardSubTitle);
            card.appendChild(cardHeader);

            // Create a card body
            const cardBody = document.createElement('div');
            cardBody.classList.add('p-4');
            Object.keys(item.marks).forEach(key => {
              const subjectRow = document.createElement('div');
              subjectRow.classList.add('flex', 'justify-between', 'mb-2');
              const subjectName = document.createElement('div');
              subjectName.classList.add('text-gray-500', 'text-sm');
              subjectName.textContent = key;
              subjectRow.appendChild(subjectName);
              const subjectMarks = document.createElement('div');
              subjectMarks.classList.add('font-semibold');
              subjectMarks.textContent = `${item.marks[key]}/50`;
              subjectRow.appendChild(subjectMarks);
              cardBody.appendChild(subjectRow);
            });
            card.appendChild(cardBody);

            // Append card div to HTML body
            document.body.appendChild(card);
          });
        });
    </script>
  </div>
</body>
</html>
